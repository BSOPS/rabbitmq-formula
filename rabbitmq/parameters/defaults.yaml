# -*- coding: utf-8 -*-
# vim: ft=yaml
#
# Set default values.
---
values:
  nodes:
    rabbit:  # the default rabbitmq nodename
      clustered: false
      user: rabbit    # 'node' would make more sense here
      host: localhost  # short hostname of node to join to, not fqdn
      runas: rabbitmq
      erlang_cookie: null
      config: {}
      service: true
      plugins:
        - rabbitmq_management
        - rabbitmq_federation
        - rabbitmq_federation_management
        # rabbitmq_auth_backend_ldap
      vhosts:
        - '/virtual/host'
      users: {}
      remove_guest_user: true
      policy:
        rabbitmq_policy:
          - name: HA
          - pattern: '.*'
          - definition: '{"ha-mode": "all"}'
      queues: {}

  environ: {}

  pkg:
    name: rabbitmq-server
    # https://github.com/rabbitmq/rabbitmq-server/releases/tag/v3.8.14
    use_upstream: repo    # use upstream repo (if applicable)
    deps_disablerepo: ''  # could be useful
    deps: {}

  dir:
    base: /usr/lib/rabbitmq
    data: /var/lib/rabbitmq
    config: /etc/rabbitmq
    cleanlist:
      - /usr/local/bin/rabbitmq-env
      - /usr/local/bin/rabbitmq-plugins
      - /var/run/rabbitmq
    service: /usr/lib/systemd/system

  rootgroup: root
  retry_option:
    # https://docs.saltstack.com/en/latest/ref/states/requisites.html#retrying-states
    attempts: 0
    until: true
    interval: 60
    splay: 10

  # Just here for testing
  added_in_defaults: defaults_value
  winner: defaults
...
